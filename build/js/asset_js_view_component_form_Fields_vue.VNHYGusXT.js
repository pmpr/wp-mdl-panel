/*! For license information please see asset_js_view_component_form_Fields_vue.VNHYGusXT.js.LICENSE.txt */
"use strict";(self.webpackChunkpmpr_wp_mdl_panel=self.webpackChunkpmpr_wp_mdl_panel||[]).push([["asset_js_view_component_form_Fields_vue"],{8915:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasField?i("fieldset",{staticClass:"pr-fieldset"},[e._t("before-fields",null,{fields:e.fields}),e._v(" "),e._l(e.fields,(function(t,s){return[e._t("before-field-row",null,{field:t}),e._v(" "),e.is(t,"")?i("div",{key:s,staticClass:"form-group"},[e._t("custom-markup",null,{props:e.fieldProps,field:t,vanished:e.isVanished(t)})],2):e.is(t,"Custom")?i("PanelField",e._b({key:s,attrs:{vanished:e.isVanished(t),field:t,value:e.getValue(t)},on:{input:function(i){return e.handleFieldChange(i,t.id)}},scopedSlots:e._u([{key:"input",fn:function(){return[e._t("custom-field",null,{field:t})]},proxy:!0}],null,!0)},"PanelField",e.fieldProps,!1)):i(e.getComponent(t),e._b({key:s,tag:"component",attrs:{vanished:e.isVanished(t),field:t,value:e.getValue(t)},on:{input:function(i){return e.handleFieldChange(i,t.id)}}},"component",e.fieldProps,!1)),e._v(" "),e._t("after-field-row",null,{field:t})]})),e._v(" "),e._t("after-fields",null,{fields:e.fields})],2):i("PanelSpinner")};s._withStripped=!0;const n=PRHelper.getType();PRHelper.getHTML();var l={name:"PanelFields",props:{fields:{type:[Object,Array],default:()=>[]},initValues:{type:Object,default:()=>({})},fieldProps:{type:Object,default:()=>({})}},data:()=>({values:{},ignores:{},vanished:{type:Object,default:()=>({})},rendered:!1,vanishables:{}}),beforeMount(){this.hasField&&(n.each(this.fields,(e=>{n.isEmpty(e.args.vanisher)||(this.vanishables[e.id]=e.args.vanisher)})),this.prepareVanishableFields())},mounted(){this.$hook.on("form:reset",(e=>{this.values=e,this.prepareVanishableFields()}))},beforeDestroy(){this.$hook.off("form:",!0)},computed:{hasField(){return!n.isEmpty(this.fields)}},methods:{getFieldByID(e){let t={};return this.hasField&&n.each(this.fields,(i=>{if(i.id===e)return t=i,!1})),t},is(e,t){const i=this.getByPath(e,"component","");return`Panel${t}Input`===i||`Panel${t}Field`===i},isVanished(e){return"boolean"==typeof this.vanished[e.id]&&this.vanished[e.id]},getValue(e){if("object"!=typeof e)return null;let t=this.initValues[e.id]||this.values[e.id];return n.isEmpty(t)&&(t=e.value,n.isEmpty(t)&&(t=e.default)),t},getComponent(e){return this.getByPath(e,"component","")},prepareVanishableFields:function(){this.vanishables&&(n.each(this.vanishables,((e,t)=>{const i=this.getValue(this.getFieldByID(t));n.each(e,(({fields:e,values:t,reverse:s})=>{let l="string"==typeof t&&i!==t||Array.isArray(t)&&!t.includes(i);s&&(l=!l),"string"==typeof e&&(e=[e]),n.each(e,(e=>{this.vanished[e]!==l&&(this.vanished[e]=l,this.rendered=!1)}))}))})),this.rendered||this.$forceUpdate())},handleFieldChange(e,t){n.isEmpty(t)||(this.$nextTick((()=>{this.rendered||(this.rendered=!0,this.$emit("rendered")),this.prepareVanishableFields()})),this.values[t]=e,this.$emit("input",n.parseArgs(this.values,this.initValues)))}}},a=l,r=(0,i(9792).Z)(a,s,[],!1,null,null,null).exports}}]);